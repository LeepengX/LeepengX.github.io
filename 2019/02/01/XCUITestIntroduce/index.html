<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="LeePengX"><title>XCUITest技术的入门 · 李鹏 de 私房菜</title><meta name="description" content="测试的App基于iOS 9.3 以及之后的系统版本，Xcode软件版本不低于7，才可以使用该技术，UI Testing 在易用性上比 KIF 这样的框架要有所进步，随着 UI Testing 的推出，Apple 也将原来的 UI Automation 一系列内容标记为弃用。这意味着 UI Testi"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">李鹏 de 私房菜</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">Sobre</a></li><li><a href="/archives">Arquivo</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>XCUITest技术的入门</a></h3></div><div class="post-content"><p>测试的App基于iOS 9.3 以及之后的系统版本，Xcode软件版本不低于7，才可以使用该技术，UI Testing 在易用性上比 KIF 这样的框架要有所进步，随着 UI Testing 的推出，Apple 也将原来的 UI Automation 一系列内容标记为弃用。这意味着 UI Testing 至少在今后一段时间内将会是 iOS 开发中的首选工具。但是我们也应该看到，基于 Accessibility 的测试方式有时候并不是很直接。在这个限制下，我们只能得到 UI 的代理对象，而不是 UI 元素本身，这让我们无法得到关于 UI 元素更多的信息 (比如直接获取 UI 元素中的内容，或者与 ViewController 中的相关的值)，现在的 UI Testing 在很大程度上还停留在比较简易的阶段，适合保证App的主流程的顺畅运行、用于回归测试。 </p>
<p>在技术探索过程中，发现测试脚本在iOS 11系统表现很好，但是在iOS 9等系统上会出现找不到按钮的情况等问题。随着iOS系统版本的推进，相信XCUITest技术的兼容性、性能会不断得到改进。</p>
<p>###一、给已有的Xcode源码工程添加UITest功能：</p>
<p>####1.在项目中新建UITest模块</p>
<p>（1）如果是新建空白项目，可以勾选Include UITest相关选项。<br>（2）如果是已有项目（比如pull下来的完整的iOS客户端代码），在Xcode中点击File-&gt;New-&gt;Target<br>如图选择：<br><img src="/2019/02/01/XCUITestIntroduce/NewUITest.png" alt="NewUITest"></p>
<p>点击Next，进入选项配置：  </p>
<ol>
<li>第一步：选择Project。  </li>
<li>第二步：选择最底部的Target to be Tested，这里选择Dev结尾的包，因为该包在模拟器上测试不需要签名。  </li>
<li>此时Product Name会根据选项自动生成。切换自己需要的语言（Objective-C、Swift（推荐））  </li>
<li>完成。 </li>
</ol>
<p><img src="/2019/02/01/XCUITestIntroduce/UITestInfo.png" alt="UITestInfo"><br>此时，项目中增加了新的以[Target+UITest]命名的文件夹:<br><img src="/2019/02/01/XCUITestIntroduce/UITestFolder.png" alt="UITestFolder"><br>当前选中的与文件夹同名的（UITests结尾）文件就是我们可以编写测试代码的文件了。  </p>
<p>####2.测试代码文件的介绍</p>
<p>在这里有初始化的几个方法  ：  </p>
<ul>
<li>setup：程序启动时会进入该方法，可以设置一些全局属性，比测试如用例失败是继续执行还是停止，是否需要禁用App的过渡动画，启动的时候的屏幕方向等。  </li>
<li>tearDown：程序结束时会进入该方法。  </li>
<li>tearExmple：测试方法，该方法系统生成，用于示例，我们可以自己写一些其他的方法，但是需要test打头，这样系统会识别出该方法为测试方法。<br>执行代码的方法：<br>当鼠标移动到tearExmple函数时，会发现这一行前面出现一个播放形状(▶)的小图标，点击该图标程序会执行该测试方法。当遇到问题，或者没有达到预期值得时候，方法后面会出现红色，方法通过之后会出现绿色。</li>
</ul>
<p>快捷键：control+option+command+U，当光标放在某个测试函数的代码中时，同样有效。  </p>
<p>###二、代码录制功能<br>在编写之前，了解下Xcode给提供的代码录制功能。<br><img src="/2019/02/01/XCUITestIntroduce/UIRecording.png" alt="UIRecording"><br>在上图中，我们找到控制台输出，哪里有一个红色的小圆点，先别着急点。先我们的光标移动到testMarket方法里之后，点击红色小圆点。进入录制阶段，等待程序的启动。当程序启动之后，点击程序的一个按钮，在光标相应的地方会生成一段代码。  </p>
<p>###三、常用基本操作<br><em>1.点击某个按钮，比如登录按钮</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.buttons[&quot;登录&quot;].tap()</span><br></pre></td></tr></table></figure></p>
<p><em>2.普通输入框输入文本</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.textFields[&quot;手机号&quot;].tap()       				//要先聚焦文本框，才能继续输入  </span><br><span class="line">app.textFields[&quot;手机号&quot;].typeText(&quot;13038865629&quot;)</span><br></pre></td></tr></table></figure></p>
<p>注意密码输入框等输入文本会变成小圆点的地方使用app.secureTextFields[“密码”]。</p>
<p><em>3.下拉刷新</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.swipeDown()  </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">*4.滚动查看屏幕下方的内容，上拉加载更多*</span><br></pre></td></tr></table></figure></p>
<p>app.swipeUp()<br>也可以左右滑动切换页面：<br>app.swipeLeft/Right()<br><code>`</code></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-02-01</span><i class="fa fa-tag"></i><a class="tag" href="/tags/iOS-UITest-测试-Swift/" title="iOS UITest 测试 Swift">iOS UITest 测试 Swift </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/2019/02/01/XCUITestIntroduce/,李鹏 de 私房菜,XCUITest技术的入门,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/01/31/withPics/" title="带有图片的博文">Próximo post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>